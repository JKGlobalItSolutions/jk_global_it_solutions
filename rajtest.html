<!doctype html>
<html lang="en">

<head>
    <title>Contact Form</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous" />
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
    <script type="text/javascript">
        (function () {
            emailjs.init("VGvEND5sp-v3tZ6A-");
        })();
    </script>
</head>

<body>
    <header>
        <!-- place navbar here -->
    </header>
    <main>
        <div class="contact">
            <div class="container">
                <div class="row">
                    <div class="col-md-12">
                        <form class="main_form" id="myForm">
                            <div class="row">
                                <div class="col-xl-6 col-lg-6 col-md-6 col-sm-6">
                                    <label for="firstName" class="form-label">First Name</label>
                                    <input class="form-control" placeholder="Your First Name" type="text" id="firstName"
                                        name="firstName">
                                </div>
                                <div class="col-xl-6 col-lg-6 col-md-6 col-sm-6">
                                    <label for="location" class="form-label">Location</label>
                                    <input class="form-control" placeholder="Your Location" type="text" id="location"
                                        name="location">
                                </div>
                                <div class="col-xl-6 col-lg-6 col-md-6 col-sm-6">
                                    <label for="phone" class="form-label">Phone Number</label>
                                    <input class="form-control" placeholder="Your Phone Number" type="text" id="phone"
                                        name="phone">
                                </div>
                                <div class="col-xl-6 col-lg-6 col-md-6 col-sm-6">
                                    <label for="email" class="form-label">Email ID</label>
                                    <input class="form-control" placeholder="Your Email ID" type="text" id="email"
                                        name="email">
                                </div>
                                <div class="col-xl-6 col-lg-6 col-md-6 col-sm-6">
                                    <label for="education" class="form-label">Education</label>
                                    <select class="form-select" id="education" name="education">
                                        <option selected="" disabled="" value="" class="placeholder">Choose...</option>
                                        <option>High School</option>
                                        <option>Bachelor's Degree</option>
                                        <option>Master's Degree</option>
                                        <option>PhD</option>
                                    </select>
                                </div>
                                <div class="col-xl-6 col-lg-6 col-md-6 col-sm-6">
                                    <label for="position" class="form-label">Position</label>
                                    <select class="form-select" id="position" name="position">
                                        <option selected="" disabled="" value="" class="placeholder">Choose...</option>
                                        <option>Intern</option>
                                        <option>Junior Developer</option>
                                        <option>Senior Developer</option>
                                        <option>Manager</option>
                                    </select>
                                </div>
                                <div class="col-md-12">
                                    <label for="skills" class="form-label">Skills and Competencies</label>
                                    <textarea class="form-control" placeholder="Your Skills and Competencies" id="skills"
                                        name="skills"></textarea>
                                </div>
                                <div class="col-md-12">
                                    <label for="projects" class="form-label">Projects</label>
                                    <textarea class="form-control" placeholder="Your Projects" id="projects"
                                        name="projects"></textarea>
                                </div>
                                <div class="mb-3 d-flex row">
                                    <div class="col-12 col-lg-3">
                                        <label for="streamSelect" class="form-label px-4">Stream</label>
                                    </div>
                                    <div class="col-12 col-lg-9">
                                        <select class="form-select border-danger shadow custom-dropdown" id="streamSelect"
                                            aria-describedby="streamHelp">
                                            <option class="bg-danger text-light" value="" disabled selected>Select Stream</option>
                                            <option class="bg-danger text-light" value="engineering">Engineering Departments</option>
                                            <option class="bg-danger text-light" value="mba">MBA</option>
                                            <option class="bg-danger text-light" value="arts-science">Arts & Science Department</option>
                                            <option class="bg-danger text-light" value="platform">Platform</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="mb-3 d-flex row">
                                    <div class="col-12 col-lg-3">
                                        <label for="subStreamSelect" class="form-label px-4">Sub Stream</label>
                                    </div>
                                    <div class="col-12 col-lg-9">
                                        <select class="form-select border-danger shadow custom-dropdown" id="subStreamSelect"
                                            aria-describedby="subStreamHelp">
                                            <option class="bg-danger text-light" value="" disabled selected>Select Sub-Stream</option>
                                        </select>
                                    </div>
                                </div>
                                <!-- Commented out CV file input -->
                                <!--
                                <div class="col-md-12">
                                    <label for="cv" class="form-label">Upload Your CV</label>
                                    <input class="form-control" type="file" id="cv" name="cv">
                                </div>
                                -->
                                <div class="col-md-12">
                                    <button class="send rounded-pill" type="submit">Send</button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </main>
    <footer>
        <!-- place footer here -->
    </footer>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
        integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js"
        integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+"
        crossorigin="anonymous"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const streamSelect = document.getElementById('streamSelect');
            const subStreamSelect = document.getElementById('subStreamSelect');

            const subStreams = {
                engineering: {
                    placeholder: 'Select Engineering Department Stream',
                    options: [
                        'Internship For CSE',
                        'Internship For IT',
                        'Internship For ECE',
                        'Internship For EEE',
                        'Internship For AI & DS',
                        'Internship For Biomedical',
                        'Internship For EIE',
                        'Internship For ICE',
                        'Internship For Civil',
                        'Internship For Mechanical',
                    ]
                },
                mba: {
                    placeholder: 'Select MBA Specialization',
                    options: [
                        'MBA in Finance',
                        'MBA in Human Resources Management',
                        'MBA in Marketing',
                        'MBA in Information Technology (IT)',
                        'MBA in Operations Management'
                    ]
                },
                'arts-science': {
                    placeholder: 'Select Arts & Science Stream',
                    options: [
                        'Internship For BCA',
                        'Internship For MCA',
                        'Internship For B.SC',
                        'Internship For M.SC',
                        'Internship For B.COM',
                        'Internship For BBA',
                    ]
                },
                platform: {
                    placeholder: 'Select Platform Area',
                    options: [
                        'Internship in Web Development',
                        'Internship in Embedded Systems',
                        'Internship in IOT',
                        'Internship in JAVA',
                        'Internship in Android',
                        'Internship in DOTNET',
                        'Internship in Cloud Computing',
                        'Internship in Bigdata',
                        'Internship in Artificial Intelligence',
                    ]
                }
            };

            streamSelect.addEventListener('change', function () {
                const selectedStream = streamSelect.value;
                const { placeholder, options } = subStreams[selectedStream] || { placeholder: 'Select Sub-Stream', options: [] };

                subStreamSelect.innerHTML = `<option class="bg-danger text-light" value="" disabled selected>${placeholder}</option>`;

                options.forEach(function (subStream) {
                    const option = document.createElement('option');
                    option.value = subStream;
                    option.textContent = subStream;
                    subStreamSelect.appendChild(option);
                });
            });
        });

        document.getElementById("myForm").addEventListener("submit", function (event) {
            event.preventDefault(); // Prevent default form submission
            sendEmail(); // Call the function to send email
            sendWhatsAppMessage(); // Call the function to send WhatsApp message
        });

        function sendEmail() {
            var firstName = document.getElementById("firstName").value;
            var location = document.getElementById("location").value;
            var phone = document.getElementById("phone").value;
            var email = document.getElementById("email").value;
            var education = document.getElementById("education").value;
            var position = document.getElementById("position").value;
            var skills = document.getElementById("skills").value;
            var projects = document.getElementById("projects").value;
            var stream = document.getElementById("streamSelect").value;
            var subStream = document.getElementById("subStreamSelect").value;

            var templateParams = {
                firstName: firstName,
                location: location,
                phone: phone,
                email: email,
                education: education,
                position: position,
                skills: skills,
                projects: projects,
                stream: stream,
                subStream: subStream,
                cv: 'No CV uploaded', // Placeholder for CV field
            };

            emailjs
                .send("service_jk37ps8", "template_tattmvo", templateParams)
                .then(function (response) {
                    console.log("SUCCESS!", response.status, response.text);
                    window.alert("Sent successfully!");
                })
                .catch(function (error) {
                    console.error("FAILED...", error);
                    window.alert("Failed to send. Please try again.");
                });
        }

        function sendWhatsAppMessage() {
            var firstName = encodeURIComponent(document.getElementById("firstName").value);
            var location = encodeURIComponent(document.getElementById("location").value);
            var phone = encodeURIComponent(document.getElementById("phone").value);
            var email = encodeURIComponent(document.getElementById("email").value);
            var education = encodeURIComponent(document.getElementById("education").value);
            var position = encodeURIComponent(document.getElementById("position").value);
            var skills = encodeURIComponent(document.getElementById("skills").value);
            var projects = encodeURIComponent(document.getElementById("projects").value);
            var stream = encodeURIComponent(document.getElementById("streamSelect").value);
            var subStream = encodeURIComponent(document.getElementById("subStreamSelect").value);

            var message = `*Contact Form Submission*%0A%0A` +
                `*First Name:* ${firstName}%0A` +
                `*Location:* ${location}%0A` +
                `*Phone Number:* ${phone}%0A` +
                `*Email ID:* ${email}%0A` +
                `*Education:* ${education}%0A` +
                `*Position:* ${position}%0A` +
                `*Skills and Competencies:* ${skills}%0A` +
                `*Projects:* ${projects}%0A` +
                `*Stream:* ${stream}%0A` +
                `*Sub-Stream:* ${subStream}%0A` +
                `*CV:* No CV uploaded`; // Placeholder for CV field

            var whatsappUrl = `https://api.whatsapp.com/send?phone=9894924809&text=${message}`;
            window.open(whatsappUrl, '_blank');
        }
    </script>
</body>

</html>
